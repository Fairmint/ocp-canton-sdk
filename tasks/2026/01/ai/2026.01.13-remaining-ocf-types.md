# Remaining OCF Object Types

**Date**: 2026-01-13 **Status**: Superseded **Priority**: Medium **Parent**:
[Milestone 2: OCP SDK Implementation](../../../2025/12/2025.12.17-milestone-2-ocp-sdk-implementation.md)

> **⚠️ SUPERSEDED**: This task has been split into 6 focused sub-tasks for better tracking:
>
> | Task | Priority | Types |
> | ---- | -------- | ----- |
> | [Exercise & Conversion Types](./2026.01.20-ocf-exercise-conversion-types.md) | High | 3 types |
> | [Valuation & Vesting Types](./2026.01.20-ocf-valuation-vesting-types.md) | High | 4 types |
> | [Security Transfer Types](./2026.01.20-ocf-transfer-types.md) | Medium | 3 types |
> | [Acceptance Types](./2026.01.20-ocf-acceptance-types.md) | Medium | 4 types |
> | [Stock Class Adjustments](./2026.01.20-ocf-stock-class-adjustments.md) | Medium | 4 types |
> | [Remaining Types](./2026.01.20-ocf-remaining-types.md) | Low | 9 types |
>
> See the individual tasks above for current status and implementation details.

## Overview

Implement SDK support for all remaining OCF object types that are supported in the DAML
implementation but not yet exposed in the SDK.

## Current State

The DAML `OcfCreateData` union type supports **48 OCF object types**. The SDK currently implements
**21 types**, leaving **27 types** to be added.

## SDK Implementation Status

### ✅ Implemented (21 types)

| Category               | Type                                 | Status |
| ---------------------- | ------------------------------------ | ------ |
| **Issuances**          | ConvertibleIssuance                  | ✅     |
|                        | EquityCompensationIssuance           | ✅     |
|                        | StockIssuance                        | ✅     |
|                        | WarrantIssuance                      | ✅     |
| **Cancellations**      | ConvertibleCancellation              | ✅     |
|                        | EquityCompensationCancellation       | ✅     |
|                        | StockCancellation                    | ✅     |
|                        | WarrantCancellation                  | ✅     |
| **Transfers**          | StockTransfer                        | ✅     |
| **Other Transactions** | EquityCompensationExercise           | ✅     |
|                        | StockRepurchase                      | ✅     |
| **Objects**            | Document                             | ✅     |
|                        | Issuer                               | ✅     |
|                        | IssuerAuthorization                  | ✅     |
|                        | IssuerAuthorizedSharesAdjustment     | ✅     |
|                        | Stakeholder                          | ✅     |
|                        | StockClass                           | ✅     |
|                        | StockClassAuthorizedSharesAdjustment | ✅     |
|                        | StockLegendTemplate                  | ✅     |
|                        | StockPlan                            | ✅     |
|                        | StockPlanPoolAdjustment              | ✅     |
|                        | VestingTerms                         | ✅     |

### ❌ Not Implemented (27 types)

| Category                    | Type                                | Priority | Notes                           |
| --------------------------- | ----------------------------------- | -------- | ------------------------------- |
| **Acceptance**              | ConvertibleAcceptance               | Medium   |                                 |
|                             | EquityCompensationAcceptance        | Medium   |                                 |
|                             | StockAcceptance                     | Medium   |                                 |
|                             | WarrantAcceptance                   | Medium   |                                 |
| **Conversion**              | ConvertibleConversion               | High     | Complex conversion workflows    |
|                             | StockConversion                     | Medium   |                                 |
| **Exercise**                | WarrantExercise                     | High     | Common workflow                 |
| **Release**                 | EquityCompensationRelease           | Medium   |                                 |
| **Repricing**               | EquityCompensationRepricing         | Low      | Rare operation                  |
| **Retraction**              | ConvertibleRetraction               | Low      |                                 |
|                             | EquityCompensationRetraction        | Low      |                                 |
|                             | StockRetraction                     | Low      |                                 |
|                             | WarrantRetraction                   | Low      |                                 |
| **Transfers**               | ConvertibleTransfer                 | Medium   |                                 |
|                             | EquityCompensationTransfer          | Medium   |                                 |
|                             | WarrantTransfer                     | Medium   |                                 |
| **Stock Class Adjustments** | StockClassConversionRatioAdjustment | Medium   |                                 |
|                             | StockClassSplit                     | Medium   | Important for corporate actions |
| **Stock Transactions**      | StockConsolidation                  | Low      | Reverse split                   |
|                             | StockReissuance                     | Low      | Rare                            |
|                             | StockPlanReturnToPool               | Low      |                                 |
| **Vesting**                 | VestingAcceleration                 | Medium   |                                 |
|                             | VestingEvent                        | Medium   |                                 |
|                             | VestingStart                        | Medium   |                                 |
| **Stakeholder Events**      | StakeholderRelationshipChangeEvent  | Low      |                                 |
|                             | StakeholderStatusChangeEvent        | Low      |                                 |
| **Valuation**               | Valuation                           | High     | Important for equity tracking   |

## Implementation Approach

### Option 1: Individual Functions (Current Pattern)

Continue the current pattern of creating individual `create*`, `get*AsOcf`, and `delete*` functions
for each type.

**Pros:**

- Consistent with existing codebase
- Type-safe parameters and results
- Easy to test individually

**Cons:**

- Large amount of boilerplate
- 81+ new files (3 per type × 27 types)

### Option 2: Batch API (ADR-001 Approach) ✅ Recommended

Implement remaining types via the batch `UpdateCapTable` API as specified in
[ADR-001](../../../../adr/001-batch-cap-table-updates.md).

**Pros:**

- Centralized converters handle all types
- Less code duplication
- Supports atomic multi-entity transactions
- Future-proof design

**Cons:**

- Requires batch API implementation first
- Individual choices may still be needed for some use cases

## Implementation Plan

### Phase 1: High Priority Types

Focus on types commonly used in real-world cap tables:

1. **WarrantExercise** - Exercise warrants into stock
2. **ConvertibleConversion** - Convert notes to equity
3. **Valuation** - Track company valuations

### Phase 2: Vesting Types

Complete the vesting workflow:

1. **VestingStart** - When vesting begins
2. **VestingEvent** - Milestone vesting events
3. **VestingAcceleration** - Accelerated vesting

### Phase 3: Transfer Types

Enable security transfers:

1. **ConvertibleTransfer**
2. **EquityCompensationTransfer**
3. **WarrantTransfer**

### Phase 4: Acceptance Types

For multi-party workflows:

1. **StockAcceptance**
2. **ConvertibleAcceptance**
3. **EquityCompensationAcceptance**
4. **WarrantAcceptance**

### Phase 5: Stock Adjustments

Corporate actions:

1. **StockClassSplit**
2. **StockClassConversionRatioAdjustment**
3. **StockConversion**
4. **StockConsolidation**

### Phase 6: Remaining Types

Low priority types:

1. Retraction types (4 types)
2. **StockReissuance**, **StockPlanReturnToPool**
3. **EquityCompensationRepricing**, **EquityCompensationRelease**
4. Stakeholder event types (2 types)

## Validation

```bash
npm run fix                    # Lint/format
npm run typecheck              # Type check
npm test                       # Unit tests
npm run test:integration       # Integration tests
```

## Related

- [ADR-001: Batch Cap Table Updates](../../../../adr/001-batch-cap-table-updates.md)
- [Milestone 2: OCP SDK Implementation](../../../2025/12/2025.12.17-milestone-2-ocp-sdk-implementation.md)
- [Batch Cap Table Updates Task](./2026.01.12-batch-cap-table-updates.md)
- DAML Source: `open-captable-protocol-daml/OpenCapTable/daml/Fairmint/OpenCapTable/CapTable.daml`

## Changelog

| Date       | Change                                              | PRs |
| ---------- | --------------------------------------------------- | --- |
| 2026-01-20 | Superseded: split into 6 focused sub-tasks          | —   |
| 2026-01-13 | Created task                                        | —   |

---

_Last updated: 2026-01-20_
