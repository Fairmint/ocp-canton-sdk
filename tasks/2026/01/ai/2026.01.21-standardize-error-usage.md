# Standardize Error Usage

**Date**: 2026-01-21  
**Status**: Open  
**Priority**: Medium  
**Source**: [OCP Protocol Review](./2026.01.21-ocp-protocol-review.md) — Issue 4.1

## Problem

The SDK has well-defined error types (`OcpValidationError`, `OcpContractError`, `OcpParseError`,
`OcpNetworkError`) but they're not consistently used throughout the codebase.

## Evidence

```typescript
// Some functions use OcpValidationError
throw new OcpValidationError('issuer.id', 'Required field is missing', { ... });

// Others use plain Error
throw new Error('Invalid contract events response');
```

## Recommendation

Audit all `throw new Error()` calls and replace with appropriate OCP error types:

- `OcpValidationError` — for input validation failures
- `OcpContractError` — for DAML contract/ledger errors
- `OcpParseError` — for data transformation errors
- `OcpNetworkError` — for network/connectivity errors

## Tasks

- [ ] Search codebase for all `throw new Error()` calls
- [ ] Categorize each error by appropriate OCP error type
- [ ] Replace with OCP error types with proper context
- [ ] Add error context for batch operations (which entity failed)
- [ ] Update tests to verify correct error types are thrown

## Acceptance Criteria

- No `throw new Error()` in SDK source code
- All errors include relevant context (field path, contract ID, etc.)
- Batch errors include which entity caused the failure
- Tests verify error types and context
