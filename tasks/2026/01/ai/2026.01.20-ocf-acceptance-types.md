# OCF Acceptance Types

**Date**: 2026-01-20 **Status**: Complete **Priority**: Medium **Parent**:
[Milestone 2: OCP SDK Implementation](../../../2025/12/2025.12.17-milestone-2-ocp-sdk-implementation.md)

## Overview

Implement SDK support for security acceptance transactions. These types are used in multi-party
workflows where a stakeholder must formally accept an issued security.

## Types to Implement (4 types)

| Type                         | Description                       | DAML Support |
| ---------------------------- | --------------------------------- | ------------ |
| StockAcceptance              | Accept issued stock               | ✅           |
| ConvertibleAcceptance        | Accept issued convertible note    | ✅           |
| EquityCompensationAcceptance | Accept issued equity compensation | ✅           |
| WarrantAcceptance            | Accept issued warrant             | ✅           |

## Implementation Checklist

### StockAcceptance

- [x] Add `toStockAcceptance` converter in `ocfToDaml.ts`
- [x] Add `fromStockAcceptance` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

### ConvertibleAcceptance

- [x] Add `toConvertibleAcceptance` converter in `ocfToDaml.ts`
- [x] Add `fromConvertibleAcceptance` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

### EquityCompensationAcceptance

- [x] Add `toEquityCompensationAcceptance` converter in `ocfToDaml.ts`
- [x] Add `fromEquityCompensationAcceptance` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

### WarrantAcceptance

- [x] Add `toWarrantAcceptance` converter in `ocfToDaml.ts`
- [x] Add `fromWarrantAcceptance` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

## Implementation Notes

All acceptance types share a common pattern:

1. **Security ID** - References the security being accepted
2. **Date** - When acceptance occurred
3. **Comments** - Optional notes

These are typically used in regulated environments where explicit acceptance is required.

## Validation

```bash
npm run fix                    # Lint/format
npm run typecheck              # Type check
npm test                       # Unit tests
npm run test:integration       # Integration tests
```

## Dependencies

- Batch API must be complete ([Batch Cap Table Updates](./2026.01.12-batch-cap-table-updates.md))
- Corresponding issuance types must be implemented (all ✅)

## Related

- [ADR-001: Batch Cap Table Updates](../../../../adr/001-batch-cap-table-updates.md)
- [Milestone 2: OCP SDK Implementation](../../../2025/12/2025.12.17-milestone-2-ocp-sdk-implementation.md)

## Changelog

| Date       | Change                                                   | PRs |
| ---------- | -------------------------------------------------------- | --- |
| 2026-01-20 | Created task                                             | —   |
| 2026-01-21 | Implemented converters, unit tests, and integration test | —   |

---

_Last updated: 2026-01-21_
