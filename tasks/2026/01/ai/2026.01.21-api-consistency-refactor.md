# API Consistency Refactor

**Date**: 2026-01-21  
**Status**: Open  
**Priority**: High  
**Source**: [OCP Protocol Review](./2026.01.21-ocp-protocol-review.md) — Issue 1.1

## Problem

The `OcpClient` exposes operations in three different patterns:

1. **Batch API** via `capTable.update()` — modern, fluent builder
2. **Direct methods** like `getIssuerAsOcf()` — async functions on entity namespaces
3. **Build commands** like `buildCreateIssuerCommand()` — for manual submission

This creates confusion about which pattern to use when.

## Evidence

```typescript
// Pattern 1: Batch API (only for writes)
ocp.OpenCapTable.capTable.update(...).create('stakeholder', data).execute();

// Pattern 2: Direct read method
await ocp.OpenCapTable.issuer.getIssuerAsOcf({ contractId });

// Pattern 3: Build command (for issuer creation specifically)
ocp.OpenCapTable.issuer.buildCreateIssuerCommand(params);
```

## Recommendation

Unify the API into a consistent pattern. Either:

- **Option A:** Batch API for all writes, direct methods for reads
- **Option B:** Resource-oriented API like `ocp.stakeholder.create()`, `ocp.stakeholder.get()`

## Tasks

- [ ] Document recommended usage patterns for each API style
- [ ] Decide on unified API pattern (Option A or B)
- [ ] Implement unified pattern
- [ ] Add migration guide for existing code
- [ ] Update examples in documentation

## Acceptance Criteria

- Single, documented pattern for writes
- Single, documented pattern for reads
- All public examples follow the recommended pattern
