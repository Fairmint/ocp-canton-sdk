# OCF Valuation & Vesting Types

**Date**: 2026-01-20 **Status**: Complete **Priority**: High **Parent**:
[Milestone 2: OCP SDK Implementation](../../../2025/12/2025.12.17-milestone-2-ocp-sdk-implementation.md)

## Overview

Implement SDK support for valuation and vesting-related types. Valuations are critical for equity
tracking, and vesting types complete the equity compensation workflow.

## Types to Implement (4 types)

| Type                | Description                     | DAML Support | Priority | Status |
| ------------------- | ------------------------------- | ------------ | -------- | ------ |
| Valuation           | Track company valuations (409A) | ✅           | High     | ✅     |
| VestingStart        | When vesting schedule begins    | ✅           | Medium   | ✅     |
| VestingEvent        | Milestone-based vesting events  | ✅           | Medium   | ✅     |
| VestingAcceleration | Accelerated vesting (M&A, etc.) | ✅           | Medium   | ✅     |

## Implementation Checklist

### Valuation

- [x] Add `toValuation` converter in `ocfToDaml.ts`
- [x] Add `fromValuation` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

### VestingStart

- [x] Add `toVestingStart` converter in `ocfToDaml.ts`
- [x] Add `fromVestingStart` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

### VestingEvent

- [x] Add `toVestingEvent` converter in `ocfToDaml.ts`
- [x] Add `fromVestingEvent` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

### VestingAcceleration

- [x] Add `toVestingAcceleration` converter in `ocfToDaml.ts`
- [x] Add `fromVestingAcceleration` converter for DAML → OCF
- [x] Add unit tests for converters
- [x] Add integration test via batch API

## Implementation Notes

### Valuation

Valuations typically include:

- `price_per_share` - The 409A valuation price
- `effective_date` - When the valuation is effective
- `stock_class_id` - Which stock class this applies to

### Vesting Types

Vesting types reference:

- `security_id` - The equity compensation being vested
- `vesting_condition_id` - The condition triggering the event
- `quantity` - Shares vesting in this event

## Validation

```bash
npm run fix                    # Lint/format
npm run typecheck              # Type check
npm test                       # Unit tests
npm run test:integration       # Integration tests
```

## Dependencies

- Batch API must be complete ([Batch Cap Table Updates](./2026.01.12-batch-cap-table-updates.md))
- VestingTerms type already implemented ✅

## Related

- [ADR-001: Batch Cap Table Updates](../../../../adr/001-batch-cap-table-updates.md)
- [Milestone 2: OCP SDK Implementation](../../../2025/12/2025.12.17-milestone-2-ocp-sdk-implementation.md)

## Changelog

| Date       | Change                                                    | PRs |
| ---------- | --------------------------------------------------------- | --- |
| 2026-01-20 | Created task                                              | —   |
| 2026-01-21 | Implemented converters, unit tests, and integration tests | —   |

---

_Last updated: 2026-01-21_
